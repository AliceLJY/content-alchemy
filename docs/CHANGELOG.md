# 📝 更新日志

记录项目的重要更新和改进。

---

## [v4.3] - 2026-02-13

### ✨ 新功能

- **Playwright B站页面采集（方法 6）** — 新增第 6 种视频素材提取方式
  - 通过 Playwright (browser MCP) 直接访问 B站页面提取标题、简介、评论、弹幕、CC 字幕
  - 评论区通过 B站 API 采集（Shadow DOM 导致 DOM 直接抓取不可用）
  - 适用于 B站独占内容（无 YouTube 镜像），可快速筛选素材价值
  - 与方法 1-5 形成完整 Fallback 链

- **Stage 下一步提示 [v4.3]** — 每个 Stage 结束时自动提示下一步操作
  - 格式：`👉 下一步：回复「继续」进入 Stage X（XX阶段），或告诉我需要修改的地方。`
  - 支持快捷词：「继续」「跳过配图」「从 Stage X 开始」「发布」
  - 手机端用户也能轻松推进流程

- **微信登录检测 [v4.3]** — 发布前自动检查微信公众号登录状态
  - 用 Playwright 访问 `mp.weixin.qq.com`，检查是否跳转到扫码页面
  - 未登录时暂停发布流程，提醒用户先扫码登录

### 🐛 Bug 修复

- **标题重复修复** — 文档化 article.md 格式规范
  - frontmatter `title:` 是唯一标题来源，body 禁止再写 `# H1`
  - baoyu 脚本从 frontmatter 提取 title 但不去掉 body 里的 H1，两边都写 = 标题显示两次

- **多标签焦点错位** — 文档化连续发布的已知问题
  - 连续发布多篇时，之前留下的编辑器标签不会自动关闭
  - 累积标签导致 Cmd+V 粘贴到地址栏而非编辑器
  - 发布前提醒用户关闭多余编辑器标签

### 🔧 改进

- **baoyu-skills 升级** — 子模块升级到 v1.32.0
- **微信登录检测简化** — 移除 Discord 相关逻辑，聚焦微信场景

### 📚 贡献者

- **Claude Code (Opus 4.6)** — Playwright 采集开发、Stage 提示设计、发布流程优化
- **AliceLJY** — 需求定义、踩坑反馈、测试验证

---

## [v4.2] - 2026-02-13

### ✨ 新功能

- **来源分级框架** — Stage 3.5 交叉验证新增分级处理
  - 硬数据（财报/官方统计）→ 直接引用
  - 可信来源（权威媒体报道）→ 直接引用，标注媒体名
  - 业内人士一手信息 → 标"据业内人士透露"
  - 自己的推算/假设 → 必须标注"假设数据，仅用于说明逻辑"
  - 社交媒体/匿名帖 → 标"网传"或删除
  - 核心原则：行业内幕不需要两个独立来源，但结论必须合逻辑

- **MIT 开源许可** — 新增 LICENSE 文件，明确开源协议

### 🔧 改进

- **Stage 7 清理方式改进** — 使用 `mv` 到 `~/.Trash/` 替代 `rm -rf`，方便用户找回

### 📚 贡献者

- **Claude Code (Opus 4.6)** — 来源分级框架设计、许可协议
- **AliceLJY** — 需求定义

---

## [v4.1] - 2026-02-11

### ✨ 新功能

- **Stage 3.5 交叉验证** — 全新阶段，解决"有来源但数据本身是错的"问题
  - 统计数据追溯原始出处，交叉搜索多源印证
  - 概念混淆检查（如"过劳死"≠"心源性猝死"）
  - 绝对化表述扫描（"全球第一""最""唯一"自动亮红灯）
  - 常识检验（数字是否通过"规模感"检验）
  - 生成 Cross-Reference Report

- **写作置信度自评** — 写入正文时对每条事实声明做实时置信度评估
  - 高置信（>90%）→ 直接使用
  - 中置信（50-90%）→ 加限定词
  - 低置信（<50%）→ 降级为定性描述或删除

- **六维 AI 味扫描** — 在 Humanizer-ZH 检查清单之后执行
  - 结构均匀度 / 句式单调度 / 词汇重复度 / 情感扁平度 / 元评论密度 / 可预测性
  - 修改手法：结构打散、句式混排、注入意外

- **板块-文体匹配** — 不同板块的去 AI 味强度差异化
  - AI实操手账 → 技术口语模式
  - AI踩坑实录 → 强口语模式（最大力度去 AI 味）
  - AI照见众生 → 随笔模式
  - AI视觉笔记 → 视觉模式

- **开头四问检查** — 写完开头后自检：好奇心、价值感、具体性、受众匹配

### 🔧 改进

- **多智能体代码评审** — 3 个 Claude Code Agent（架构师、安全审计、DX 体验）对仓库做完整代码审查
  - 移除所有硬编码路径
  - v1/v2 gemini 脚本合并为单文件
  - 补全遗漏依赖 `juice`
  - 新增项目元数据和 `scripts` 快捷命令
  - 强化 nano-banana-pro Checkpoint

- **README 中英文同步更新** — README.md 和 README-EN.md 同步到 v4.1

### 📚 贡献者

- **Claude Code (Opus 4.6)** — 交叉验证设计、六维扫描、代码评审、文档更新
- **AliceLJY** — 需求定义、真实踩坑案例提供（60万过劳死、华为手表等）

---

## [v4.0] - 2026-01-27

### ✨ 新功能

- **Chrome 复用** — 不再需要关闭所有 Chrome 窗口
  - 自动检测已有 Chrome 调试端口并复用
  - 优先找已登录的微信标签（`token=` 识别），避免新标签丢失登录态
  - 无调试端口时用独立 profile 启动新实例，不干扰用户浏览器
  - 新增 `--cdp-port <port>` 手动指定端口
  - 修复脚本完成后进程不退出的问题
  - ✅ 已合并到上游 baoyu-skills（[#23](https://github.com/JimLiu/baoyu-skills/pull/23)）

- **全 IDE 配图生成** — Claude Code 也能自动生图了
  - 通过 `baoyu-danger-gemini-web` skill（Gemini Web 反向 API）实现
  - 配合 `nano-banana-pro-prompts-recommend-skill` 优化 Prompt
  - Antigravity 不再是"唯一能自动生图"的 IDE

- **占位符格式统一** — 上游采纳了我们的兼容性建议
  - baoyu v1.23.0 将 `[[IMAGE_PLACEHOLDER_x]]` 改为 `WECHATIMGPH_x`
  - 解决了不同 Markdown 解析器对双方括号处理不一致的问题

### 🔧 改进

- **搜索效果说明** — 明确搜索结果质量受 AI 模型、提示词和搜索范围共同影响
  - 提示词的作用是限定搜索范围和内容类型，不保证结果质量
  - 不同 AI 模型对同一搜索指令的理解和执行能力不同

- **Skill 安装说明** — 新增懒人安装话术，降低入门门槛

- **项目文件整理** — 根目录临时文件清理，gitignore 更新

### 📚 贡献者

- **Claude Code (Opus 4.5)** — Chrome 复用开发、测试、PR 提交、文档更新
- **AliceLJY** — 需求定义、测试验证、Issue/PR 提交

---

## [v3.2] - 2026-01-25

### ✨ 新功能

- **视频采集 Fallback 机制** - 多种方法自动切换
  - 方法 1：yt-dlp 直接提取（首选）
  - 方法 2：NotebookLM 自动化导入（YouTube 最佳方案）
  - 方法 3：Browser DOM 提取
  - 方法 4：Live Search 替代视频
  - 方法 5：YouTube-First 策略（B站备用）

- **NotebookLM 自动化验证** - Chrome MCP 实测
  - ✅ 可获取 YouTube 完整 transcript（不只是摘要）
  - ❌ B站/小红书 仅能抓取页面文本，不能提取视频字幕

- **测试话术文档** - 复制即用
  - 完整流程测试
  - YouTube 视频提取（NotebookLM vs yt-dlp）
  - Fallback 链测试
  - 微信发布测试
  - 平台支持速查表

### 🔧 改进

- **写作风格指南重构**
  - 明确区分"个人示例" vs "通用框架"
  - 七大去 AI 味原则（通用）
  - 搜索策略按话题类型（通用）

- **移除坐标定位方案** - 微信有 2 种页面布局，坐标不稳定

- **README 亮点表格** - "你可能遇到的问题 → 我已经帮你解决了"

### 📚 贡献者

- **Claude Code (Opus 4.5)** - 主要开发：Fallback 机制、NotebookLM 测试、测试话术、文档重构
- **Antigravity** - 流程验证：实际运行 yt-dlp、微信发布等功能测试

---

## [v3.1] - 2026-01-25

### ✨ 新功能

- **微信公众号自动发布** - 一键发布文章到微信，节省 70% 时间
  - 自动填写标题
  - 自动粘贴内容（保持格式）
  - 自动插入所有图片
  - 自动保存草稿
- **新手友好文档** - 重写所有文档，更加易懂
  - [WECHAT-PUBLISH.md](./WECHAT-PUBLISH.md) - 微信发布完整指南
  - [PROJECT-STRUCTURE.md](./PROJECT-STRUCTURE.md) - 项目结构说明
  - [BEGINNER-GUIDE.md](./BEGINNER-GUIDE.md) - 新手补充指南

### 🐛 Bug 修复

- **修复粘贴问题** - 解决微信拒绝粘贴 HTML 内容的问题
  - 原因: 切换标签页导致焦点变化，微信检测并拒绝
  - 修复: 直接使用系统剪贴板，不打开新标签页
  - 文件: `wechat-article.ts` 第 81-98 行
- **修复依赖缺失** - 补全 Baoyu 的依赖包
  - 创建 `package.json` 包含所有必要依赖
  - 降级 `marked` 到 v9.1.6 解决兼容性问题

### 🔧 改进

- **Markdown 转换器** - 创建简化版转换器
  - 支持标准 Markdown `![]()`
  - 支持 Antigravity 中文符号 `！【】（）`
  - 自动处理中文句号 `。` → `.`
  - 生成图片占位符 `[[IMAGE_PLACEHOLDER_N]]`
- **脚本整理** - 简化脚本结构
  - 创建统一的 `publish.sh` 发布脚本
  - 归档 18 个旧的测试/调试脚本到 `.archive/`
  - 保留 7 个核心脚本
- **文档优化** - 删除 8 个测试/调试文档
  - 保留 6 个核心文档
  - 所有文档重写为新手友好风格

### 📚 贡献者

- **Claude Code (Opus 4.5)** - Bug 修复、Markdown 转换器、文档重构
- **Antigravity** - 流程测试、微信发布验证

---

## [v2.6] - 2026-01-24

### 文档优化

- 优化安装文档
- 添加新手指南
- 改进工作流说明
- 添加 doctor.sh 环境检测脚本

### 📚 贡献者

- **Claude Code** - 文档优化
- **Antigravity** - 初始工作流设计

---

## [v2.5] - 2026-01-23

### 功能迭代

- Production Ready 版本
- 完善 7 阶段 Alchemy 工作流
- 添加 Source Truth Table（防 AI 幻觉）
- 优化图片生成流程
- 添加微信公众号二维码
- 重新定义自动化边界："端到端协作"而非"全自动化"

### 📚 贡献者

- **Antigravity** - 主要开发：工作流设计、微信集成

---

## [v2.0] - 2026-01-22

### 架构重构：9 → 7 阶段

**重要决策**：将 9 阶段精简为 7 阶段，更聚焦核心价值

- 新的 7 阶段 Alchemy 工作流
  - Stage 1: 选题挖掘
  - Stage 2: 素材采集
  - Stage 3: 深度分析
  - Stage 4: 知识炼化
  - Stage 5: 人性化写作
  - Stage 6: 分发（Flash-Publish）
  - Stage 7: 清理
- 集成 Baoyu 微信发布
- 多 Skill 协同架构
- 跨 IDE 兼容性说明

### 📚 贡献者

- **Antigravity** - 架构重构、工作流精简设计

---

## [v1.5] - 2026-01-21

### 扩展：4 → 9 阶段

**探索期**：扩展为更细粒度的 9 阶段工作流

1. 话题挖掘 - 智能选题
2. 素材采集 - 多源信息收集
3. 深度分析 - 信息提炼
4. 知识图谱 - 结构化知识
5. 内容撰写 - AI 辅助写作
6. 可视化 - 图文配合
7. 审核优化 - 质量把关
8. 分发发布 - 多渠道推送
9. 数据复盘 - 效果追踪

### 设计思考

- 更细粒度的流程控制
- 增加数据反馈环节
- 引入审核机制

### 📚 贡献者

- **Antigravity** - 工作流扩展设计

---

## [v1.0] - 2026-01-20

### 🎉 项目诞生！

**最初版本**：4 阶段工作流

| 阶段 | 名称 | 功能 |
|------|------|------|
| Stage 1 | Mining | 素材挖掘与采集 |
| Stage 2 | Refining | 内容精炼与分析 |
| Stage 3 | PPT | 知识可视化输出 |
| Stage 4 | Distribution | 内容分发 |

### 核心理念

- 多 Skill 协同作战
- 端到端内容生产
- AI 驱动的自动化流程

### 📚 贡献者

- **Antigravity** - 项目创始、核心架构设计

---

## 版本号说明

格式: `v主版本.次版本`

- **主版本**: 重大功能变更或架构调整
- **次版本**: 功能增强、Bug 修复、文档优化

---

## 贡献者总览

| 贡献者 | 角色 | 主要贡献 |
|-------|------|---------|
| **AliceLJY** | 项目维护者 | 需求定义、测试验证、最终审核 |
| **Claude Code (Opus 4.5)** | v3.1-v4.0 主要开发 | Bug 修复、Fallback 机制、NotebookLM 测试、Chrome 复用、全 IDE 配图、上游 PR、文档重构 |
| **Claude Code (Opus 4.6)** | v4.1-v4.3 主要开发 | 交叉验证(Stage 3.5)、来源分级框架、六维AI味扫描、Playwright B站采集、微信发布优化 |
| **Antigravity** | v1.0-v2.5 主要开发 | 项目创始、工作流演进（4→9→7阶段）、微信集成 |
| **Baoyu (宝玉)** | 核心依赖 | 微信 CDP 自动化核心代码 |
| **YouMind-OpenLab** | 核心依赖 | 图像提示词推荐 |
| **Lynne Liu** | 灵感来源 | 思维链提示词结构 |

---

*查看完整提交记录: [GitHub Commits](https://github.com/AliceLJY/content-alchemy/commits)*
