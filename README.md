# Content Alchemy Skill

**[English](./README-EN.md)** | 中文

🚀 **新手必看**: [安装指南](./docs/SETUP.md) | [新手指南](./docs/BEGINNER-GUIDE.md) | [微信发布](./docs/WECHAT-PUBLISH.md)
📚 **深入了解**: [技术文档](./SKILL.md) | [项目结构](./docs/PROJECT-STRUCTURE.md)
🔄 **一键更新**: `git pull && git submodule update --remote --merge`

**一句话说明**：让 AI 帮你完成"调研 → 分析 → 写作 → 配图 → 发布"的任意环节，或全部。

---

## 🎯 这个项目能帮你做什么？

> **不是只能发微信！** 每个阶段都可以单独使用。

| 你的需求 | 怎么用 | 示例指令 |
|---------|-------|---------|
| 📚 **只做调研** | Stage 1-2 | "帮我收集 Cursor vs Windsurf 的对比素材，整理成文档给我" |
| 🔍 **只做深度分析** | Stage 3 | "分析这 3 个 YouTube 视频的核心观点，生成对比表格" |
| ✍️ **只写文章** | Stage 5 | "把这份技术笔记改写成公众号风格，不需要发布" |
| 🎨 **只配图** | Stage 5 配图 | "给这篇文章生成 3 张插图" |
| 📤 **只发微信** | Stage 6 | "把 article.md 发到微信草稿箱" |
| 🔄 **全流程** | Stage 1-7 | "帮我写一篇关于 XX 的文章，发到微信" |

**核心价值**：
- 🧩 **像乐高一样灵活** — 需要哪块用哪块，不强制全流程
- 🛡️ **防 AI 幻觉** — Source Truth Table 强制标注来源
- ✨ **去 AI 味** — 七大写作原则，告别塑料感
- 📖 **新手友好** — 每一步都有验证方法，不懂代码也能用

---

## 💡 为什么这个项目不一样

> 这不是"又一个模板"，而是**踩了无数坑后沉淀下来的经验**。

**v4.0 迭代亮点（给真正要用的你）：**

| 你可能遇到的问题 | 我已经帮你解决了 |
|----------------|-----------------|
| 🤔 "每次发微信都要关 Chrome" | Chrome 复用：自动检测已有浏览器，不用关窗口了 |
| 🤔 "只有 Antigravity 能自动生图" | 全 IDE 配图：三种方案均全 IDE 兼容，Gemini Web 反向 API / Chrome MCP / Antigravity 原生 |
| 🤔 "装了半天跑不起来" | 完整的 `doctor.sh` 环境检测，一键排查缺什么 |
| 🤔 "AI 写的文章一股塑料味" | 七大去 AI 味原则 + Humanizer-ZH 检查清单 |
| 🤔 "不知道去哪找素材" | 按话题类型的搜索策略（技术/产品/社会观察各有路径） |
| 🤔 "AI 瞎编数据怎么办" | Source Truth Table 强制标注来源，杜绝幻觉 |
| 🤔 "这是你的风格，我怎么用" | 明确区分了**通用框架** vs **个人示例**，直接改就行 |
| 🤔 "Baoyu 装在哪？怎么装？" | 懒人话术：把链接丢给 AI，一句话搞定安装 |
| 🤔 "YouTube 视频怎么提取字幕" | yt-dlp + NotebookLM 两种方案，按需选择 |

**设计原则：**
- 📖 **新手友好**：不假设你懂任何技术背景，每一步都有验证方法
- 🔧 **可定制**：写作风格是示例，搜索策略是通用，拿去直接改
- 🛡️ **防幻觉**：不是让 AI 自由发挥，而是强制它标注来源
- ⚡ **实战验证**：每个"设计决策"背后都有真实的踩坑故事

---

### 🤝 人机协作：90/10 黄金比例

本项目追求"极速交付，人工把关"：
- **AI (90%)**: 选题、采集、分析、素材核查、撰写、配图、**自动发布草稿**
- **HUMAN (10%)**:
  1. 素材确认：审核 Source Truth Table，确保引用真实
  2. 草稿微调：在微信中进行审美把关（封面、排版）
  3. 模块化启动：可从任何阶段切入，AI 自动补完剩余流程

> **核心逻辑**：AI 负责繁琐的数字化工作，人负责真实性确认与审美决策。

### 📮 微信公众号自动发布（可选功能）

如果你用微信公众号，可以一键发布到草稿箱：

- ✅ 自动填写标题、粘贴内容、插入图片、保存草稿
- ✅ 本地运行，不经过第三方服务器
- ✅ 节省时间：13 分钟 → 3.5 分钟

> 💡 详细教程请查看 [WECHAT-PUBLISH.md](./docs/WECHAT-PUBLISH.md)

**不用微信？没关系！** 这套工作流的核心价值在于调研、分析、写作，输出格式可以是任何 Markdown 文件。

## 🔌 Skill 安装

本项目依赖几个 Claude Code Skill，安装方式很简单——**把链接丢给 AI 就行**。

### 懒人话术（复制粘贴到 Claude Code）

**微信发布（必装）：**
```
帮我安装这个 skill：https://github.com/JimLiu/baoyu-skills
它是一个 git submodule，安装到 dependencies/baoyu-skills 目录下。
```

**配图生成（推荐）：**
```
帮我安装这两个 skill：
1. baoyu-danger-gemini-web（Gemini 生图）
2. nano-banana-pro-prompts-recommend-skill（生图 Prompt 优化）
```

> 💡 Skill 安装后存放在 `~/.claude/skills/` 目录，Claude Code 会自动识别。baoyu-skills 作为 git submodule 需要 `bun install` 安装依赖。

### 手动安装

```bash
# 1. 克隆项目
git clone --recurse-submodules https://github.com/AliceLJY/content-alchemy.git
cd content-alchemy

# 2. 安装依赖
bun install

# 3. 验证
bun ./dependencies/baoyu-skills/skills/baoyu-post-to-wechat/scripts/wechat-article.ts --help
```

> 💡 详细安装步骤请查看 [SETUP.md](./docs/SETUP.md)

---

## 📝 致谢与版权声明

本项目的核心逻辑是基于开源社区多位开发者贡献的优秀 Skill 和提示词思路进行的二次编排与场景化串联。特此感谢以下项目的原始作者：

*   **微信发布流程**:
    *   **Skill**: `baoyu-post-to-wechat`
    *   **Author**: **Baoyu (宝玉)** — 感谢提供了微信公众号 CDP 自动化操作的核心代码与 DOM 选择器逻辑

*   **图像提示词推荐**:
    *   **Skill**: nano-banana-pro-prompts-recommend-skill
    *   **Author**: **YouMind-OpenLab** — 感谢提供了高质量的 Prompt 库与推荐算法

*   **思维链提示词**:
    *   **Prompt**: 链式指令 (Chained Instructions)
    *   **Author**: **Lynne Liu**
    *   **Source**: [YouMind Shortcut](https://youmind.com/zh-CN/shortcuts/P5cdEZdDzG51jA) — 感谢提供了"Mining -> Refining -> Building"这一核心内容炼金术的 Prompt 结构灵感

*   **版权声明**：本项目所调用的基础工具版权归原作者所有。我（AliceLJY）仅根据个人实际业务需求，将这些原子化的功能进行了串联、重构与场景化适配，旨在提供一种多 Skill 协同工作的思路。

*   **致敬**：感谢所有为 AI 生态贡献智力资产的先行者，是你们的开源精神让"提词即生产"成为可能。


## ⚙️ 设计路径

本仓库的主要目的是提供一种**"多 Skill 协同作战"**的思路：
1.  **端到端闭环**：通过 7 阶段炼金术，实现从灵感采集到草稿保存的完整生产链
2.  **智能增量更新**：能自动识别并更新现有草稿，避免重复发文，保持创作流的一致性
3.  **自进化架构**：固化 7 阶段自动化架构，实现从"寻找灵感"到"数字资产分发"的完整闭环

## 🧠 设计决策

本章节解释一些"看起来奇怪"的设计背后的深层原因。

### 1. 为什么YouTube优先于Bilibili？

**误解：** "因为B站被墙"  
**真相：** "因为数据可得性"

- B站：UP主可能不开字幕，API提取困难
- YouTube：自动生成字幕，`yt-dlp`轻松获取

**实际案例：**
某次搜索到B站视频讨论AI算力，但视频没有字幕/转录文本。同名搜索YouTube发现有搬运视频，秒获完整文本。这不是绕过审查，而是优先选择**数据获取最简单的路径**。

---

### 2. 为什么Chrome必须用调试端口启动？

**误解：** "这是可选的技术细节"  
**真相：** "这是防止API限流的生死线"

**踩坑经历：**
1. 第一次测试成功 → 以为是Baoyu脚本自动搞定
2. 出现429错误 → 发现根本没走CDP，是API调用被限流
3. 单独跑Baoyu → 浏览器没动，但显示"已完成" → 假成功

**根本原因：**
Baoyu脚本有两种模式：
- **CDP模式（需要9222）：** 真实浏览器操作，稳定
- **API模式（不需要端口）：** 直接调微信接口，易被拒绝

不开9222端口 → 脚本降级到API模式 → 显示"Done"但无草稿。

---

### 3. 为什么封面图要手动设置？

**误解：** "可以全自动化"  
**真相：** "中途操作风险极高"

**测试结果：**
- 尝试自动点击"编辑"按钮 → 卡住
- 原因1：按钮只在hover时显示，坐标容易失效
- 原因2：复制内容会跳转到Antigravity对话框
- 原因3：复制位置错位

**最佳实践：**
1. 自动化只做到"保存草稿"
2. 用户打开草稿 → 选择第一张图作为封面
3. 审查格式 → 手动点击"发送"

这不是"降级方案"，而是**唯一稳定的方案**。

---

### 4. 为什么需要Source Truth Table？

**误解：** "这是技术文档"  
**真相：** "这是反AI幻觉的最后防线"

**早期版本问题：**
AI只拿到视频标题+简介+评论 → 基于这些"二手信息"编故事。

**改进后：**
强制AI标注每个论断的来源：
- ✅ 视频12:34处提到 → 可信
- ⚠️ 评论区推测 → 改为"据XX称"
- ❌ 找不到来源 → AI在编，删掉

**人的作用：**
判断这个来源是否足够权威。AI无法判断信源可信度，只有人能做这个决策。

---

### 5. 为什么不用关Chrome了？

**误解：** "发文章必须关掉所有浏览器"
**真相：** "那是旧版的限制，v4.0 已经解决了"

**踩坑经历：**
每次发微信文章都要先 Cmd+Q 关掉所有 Chrome 窗口，否则脚本启动新实例时会因为 profile 目录被锁定而失败。对于日常使用来说很不友好。

**v4.0 改进：**
脚本启动前先自动扫描已有 Chrome 调试端口，找到就直接复用。复用时优先找已登录微信的标签（通过 URL 中的 `token=` 识别），避免新开标签丢失登录态。找不到已有 Chrome 才启动新实例。

这个改动已提交 PR 到上游 baoyu-skills（[#23](https://github.com/JimLiu/baoyu-skills/pull/23)）。

---

### 6. 为什么搜索结果有时候不理想？

**误解：** "提示词写好了就能搜到好素材"
**真相：** "搜索效果是 AI 模型 × 提示词 × 搜索范围的综合结果"

SKILL.md 中的搜索策略（按话题类型分技术/产品/社会观察）提供的是**搜索范围建议**，不是质量保证。实际搜索效果还取决于：

- **AI 模型能力**：不同模型对搜索指令的理解和执行能力不同
- **提示词精度**：越具体的搜索指令，结果越精准
- **时效性**：热点话题的素材更新频率不同

**建议：** 把搜索策略当作起点，根据实际结果迭代调整。如果某个 AI 的搜索效果不好，换个模型试试。

---

## 🛠️ 模块化指令与灵活性

本 Skill 支持**任意阶段启动**，**任意阶段结束**。不必每次都跑全流程：

### 常见使用场景

**场景 1：我只想做调研，不写文章**
```
帮我收集关于"AI 编程助手"的最新动态，
整理成一份素材文档给我，不需要写文章。
```

**场景 2：我已经有素材了，直接写文章**
```
用这份 notes.md 作为素材，帮我写一篇公众号文章，
写完给我看就行，不发布。
```

**场景 3：文章写好了，只发微信**
```
帮我把 ~/Documents/article.md 发到微信草稿箱。
```

**场景 4：帮我从头到尾全搞定**
```
帮我写一篇公众号文章，话题是"Cursor vs Windsurf 2025对比"，
从搜索素材开始，完成后保存到微信草稿箱。
```

**场景 5：我不用微信，只想用这套调研+写作流程**
```
帮我调研 XX 话题，分析核心观点，写成一篇博客文章，
保存到 ./output/article.md
```

> 💡 **微信发布只是最后一个可选步骤**，这套工作流的核心价值在于：系统化的调研方法 + 防幻觉机制 + 去 AI 味写作原则。

## 🚀 持续进化与反馈

**本项目正处于活跃更新中！** 
欢迎大家试用并提出宝贵意见（通过 Issue 或 PR）。你的每一个反馈都可能成为下次系统进化的输入。

## 🌐 多 IDE 兼容性

核心逻辑（SKILL.md）采用通用的 Open-Skill 指令规范，各 IDE 均可使用：

- **Claude Code**: ⭐ **推荐** - CLAUDE.md 自动加载项目记忆 + 自动生图 + 微信发布
- **Antigravity**: ✅ 兼容 - 自动加载 SKILL.md + 自动生图（Gemini 原生，无需额外 Skill）
- **Cursor / Windsurf**: ✅ 兼容 - 需手动引用 SKILL.md，配图可用 `baoyu-danger-gemini-web`
- **其他 Agentic IDEs**: 视工具集而定，配图方案全兼容

### ⚠️ 功能对比

| 功能 | Claude Code | Antigravity | Cursor 等 |
|------|-------------|-------------|-----------|
| **工作流加载** | ✅ CLAUDE.md 自动 | ✅ SKILL.md 自动 | ⚠️ 手动引用 |
| 素材采集 | ✅ 自动 | ✅ 自动 | ✅ 自动 |
| 深度分析 | ✅ 自动 | ✅ 自动 | ✅ 自动 |
| 文章撰写 | ✅ 自动 | ✅ 自动 | ✅ 自动 |
| **配图生成** | ✅ 自动 | ✅ 自动 | ✅ 自动 |
| 微信发布 | ✅ 自动 | ✅ 自动 | ⚠️ 需配置 |

### 🎨 配图生成方案

三种方案均**全 IDE 兼容**，按需选择：

**方案 1：`baoyu-danger-gemini-web` Skill（推荐）**
通过 Gemini Web 反向 API 自动生图，无需手动操作。所有支持 Skill 的 IDE 均可使用。配合 `nano-banana-pro-prompts-recommend-skill` 可优化生图 Prompt。

**方案 2：Chrome MCP 操作 Gemini 网页**
通过浏览器自动化在后台操作已登录的 Gemini 网页生图。用户无需手动干预，但 Gemini 聊天记录中会留有痕迹。适合有 Google 账号且已登录 Gemini 的用户。

**方案 3：Antigravity 原生**
Antigravity IDE 内置 Gemini 生图能力，无需安装额外 Skill。

> 💡 方案 1 和方案 2 不限 IDE，任何 Agentic IDE 都能用。方案 3 仅限 Antigravity。

**Claude Code / Cursor 用户提示：**

如果 IDE 不会自动加载工作流，在指令开头手动引用：

```
请先阅读 SKILL.md，然后按照 Stage 1-2 帮我搜索今天的热点新闻作为公众号素材。
```

> 💡 详细说明请查看 [SETUP.md 的 Q7](./docs/SETUP.md#q7-claude-code-不识别-skillmd-工作流)

### 💻 官方验证环境

本项目已在以下配置中通过完整测试（Stable）：

- **Hardware**: MacBook Air (13-inch, M4, 2025) / 16GB RAM / Apple M4 Chip
- **System**: macOS Tahoe (26.3 Beta)
- **IDE**:
  - **Claude Code (Opus 4.5)** — 主力开发环境，代码编写与调试
  - **Antigravity (Gemini)** — 测试验证环境，多环境兼容性测试

## 🤖 AI 协作声明

本项目由多个 AI Agent 与用户协作完成：

| 版本 | 主要贡献者 | 角色 |
|------|-----------|------|
| v1.0 | **Antigravity** | 项目创始、4 阶段工作流设计 |
| v1.5 | **Antigravity** | 扩展到 9 阶段工作流 |
| v2.0-2.5 | **Antigravity** | 精简为 7 阶段、微信集成 |
| v3.1-3.2 | **Claude Code (Opus 4.5)** | Bug 修复、Fallback 机制、NotebookLM 测试、文档重构 |
| v4.0 | **Claude Code (Opus 4.5)** | Chrome 复用、全 IDE 配图、上游 PR、文档完善 |

> 详细更新历史请查看 [CHANGELOG.md](./docs/CHANGELOG.md)

## 📲 关注公众号

专业劈叉式跨界选手：🧬 医学出身，🎭 文化口饭碗，🤖 AI 是我的野路子。

不卷参数，不追新模型，只关心一个问题：AI 啥时候能装进我脑子，替我不开心？

欢迎围观我与 AI 相爱相杀的日常。

——AI不会取代你，但会用AI的人会。所以我先学了，你随意。

🔧 踩坑副产品已开源 → [content-alchemy](https://github.com/AliceLJY/content-alchemy)

<img src="./assets/wechat_qr.jpg" width="200" alt="WeChat QR Code">

---
*v1.0-2.5 by Antigravity | v3.1-3.2 by Claude Code | v4.0 by Claude Code (Opus 4.5)*
